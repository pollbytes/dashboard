<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ApexTrade Terminal | Real-time Analytics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Inter:wght@300;400;600&display=swap');

        :root {
            --bg-dark: #0b0e11;
            --panel-bg: #151a21;
            --border-color: #2a2e39;
            --up-color: #00c853;
            --down-color: #ff3d00;
            --accent: #2962ff;
            --text-main: #e1e1e1;
            --text-dim: #848e9c;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            overflow: hidden; /* App-like feel */
        }

        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        ::-webkit-scrollbar-track {
            background: var(--bg-dark);
        }
        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-dim);
        }

        .glass-panel {
            background: var(--panel-bg);
            border: 1px solid var(--border-color);
        }

        .text-up { color: var(--up-color); }
        .text-down { color: var(--down-color); }
        .bg-up { background-color: var(--up-color); }
        .bg-down { background-color: var(--down-color); }

        .price-flash-up {
            animation: flashGreen 0.5s ease-out;
        }
        .price-flash-down {
            animation: flashRed 0.5s ease-out;
        }

        @keyframes flashGreen {
            0% { background-color: rgba(0, 200, 83, 0.3); }
            100% { background-color: transparent; }
        }
        @keyframes flashRed {
            0% { background-color: rgba(255, 61, 0, 0.3); }
            100% { background-color: transparent; }
        }

        /* Canvas container to ensure proper resizing */
        #chart-container {
            position: relative;
            width: 100%;
            height: 100%;
            cursor: crosshair;
        }
        
        .btn-trade {
            transition: all 0.2s;
        }
        .btn-trade:active {
            transform: scale(0.98);
        }
    </style>
</head>
<body class="h-screen w-screen flex flex-col text-sm">

    <!-- Header -->
    <header class="h-12 border-b border-[#2a2e39] flex items-center px-4 justify-between shrink-0 bg-[#151a21]">
        <div class="flex items-center gap-4">
            <div class="flex items-center gap-2 text-blue-500 font-bold text-lg tracking-wider">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                </svg>
                APEXTRADE
            </div>
            <div class="h-4 w-px bg-gray-700 mx-2"></div>
            <div id="connection-status" class="flex items-center gap-2 text-xs text-green-400">
                <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                Connected
            </div>
        </div>
        
        <div class="flex items-center gap-6">
            <div class="text-right">
                <div class="text-[10px] text-gray-400 uppercase">Equity Value</div>
                <div class="font-mono font-bold text-base" id="equity-val">$124,592.45</div>
            </div>
            <div class="w-8 h-8 rounded bg-gray-700 flex items-center justify-center text-xs font-bold">
                JD
            </div>
        </div>
    </header>

    <!-- Main Workspace -->
    <div class="flex-1 flex overflow-hidden">
        
        <!-- Left Sidebar: Watchlist -->
        <aside class="w-64 border-r border-[#2a2e39] flex flex-col bg-[#151a21] shrink-0 hidden md:flex">
            <div class="p-3 border-b border-[#2a2e39] font-semibold text-gray-400 text-xs tracking-wider flex justify-between">
                <span>WATCHLIST</span>
                <span>CHG%</span>
            </div>
            <div id="watchlist" class="flex-1 overflow-y-auto">
                <!-- Generated by JS -->
            </div>
        </aside>

        <!-- Center: Chart Area -->
        <main class="flex-1 flex flex-col relative bg-[#0b0e11]">
            <!-- Ticker Info Bar -->
            <div class="h-14 border-b border-[#2a2e39] flex items-center px-4 justify-between bg-[#0b0e11]">
                <div class="flex items-center gap-4">
                    <h1 id="active-symbol" class="text-2xl font-bold tracking-tight text-white">BTC/USD</h1>
                    <div class="flex flex-col">
                        <span id="current-price" class="text-lg font-mono font-medium text-up">42,150.00</span>
                        <span id="price-change" class="text-xs font-mono text-up">+1.24%</span>
                    </div>
                </div>
                <div class="flex gap-2">
                    <button class="px-3 py-1 rounded bg-[#2a2e39] hover:bg-[#363c4a] text-xs text-gray-300">1M</button>
                    <button class="px-3 py-1 rounded bg-[#2a62ff] text-white text-xs font-bold">5M</button>
                    <button class="px-3 py-1 rounded bg-[#2a2e39] hover:bg-[#363c4a] text-xs text-gray-300">15M</button>
                    <button class="px-3 py-1 rounded bg-[#2a2e39] hover:bg-[#363c4a] text-xs text-gray-300">1H</button>
                </div>
            </div>

            <!-- Canvas Container -->
            <div id="chart-container" class="flex-1">
                <canvas id="main-chart"></canvas>
                <!-- Tooltip Overlay -->
                <div id="chart-tooltip" class="absolute pointer-events-none hidden bg-[#1e2329] border border-[#2a2e39] p-2 rounded shadow-xl text-xs z-10" style="top: 0; left: 0;">
                    <div class="flex justify-between gap-4"><span class="text-gray-400">O:</span> <span id="tt-open" class="font-mono"></span></div>
                    <div class="flex justify-between gap-4"><span class="text-gray-400">H:</span> <span id="tt-high" class="font-mono"></span></div>
                    <div class="flex justify-between gap-4"><span class="text-gray-400">L:</span> <span id="tt-low" class="font-mono"></span></div>
                    <div class="flex justify-between gap-4"><span class="text-gray-400">C:</span> <span id="tt-close" class="font-mono"></span></div>
                </div>
            </div>

            <!-- Trade Controls (Bottom of Center) -->
            <div class="h-16 border-t border-[#2a2e39] bg-[#151a21] p-2 flex items-center justify-between gap-4">
                 <div class="flex gap-2 w-full max-w-md">
                     <button id="btn-sell" class="btn-trade flex-1 bg-[#ff3d00] hover:bg-[#d50000] text-white font-bold py-2 rounded flex flex-col items-center justify-center leading-tight">
                         <span>SELL MKT</span>
                         <span class="text-[10px] font-normal opacity-80" id="btn-sell-price">--</span>
                     </button>
                     <div class="flex flex-col items-center justify-center w-24">
                         <label class="text-[10px] text-gray-400 mb-1">QTY</label>
                         <input type="number" value="1.0" class="w-full bg-[#0b0e11] border border-[#2a2e39] text-center text-white rounded py-1 font-mono text-sm focus:outline-none focus:border-blue-500">
                     </div>
                     <button id="btn-buy" class="btn-trade flex-1 bg-[#00c853] hover:bg-[#00a844] text-white font-bold py-2 rounded flex flex-col items-center justify-center leading-tight">
                         <span>BUY MKT</span>
                         <span class="text-[10px] font-normal opacity-80" id="btn-buy-price">--</span>
                     </button>
                 </div>
                 <div class="hidden lg:block text-xs text-gray-500">
                     Market data is simulated for demo purposes.
                 </div>
            </div>
        </main>

        <!-- Right Sidebar: Order Book & Trades -->
        <aside class="w-72 border-l border-[#2a2e39] flex flex-col bg-[#151a21] shrink-0 hidden lg:flex">
            <!-- Order Book -->
            <div class="flex-1 flex flex-col min-h-0 border-b border-[#2a2e39]">
                <div class="p-2 border-b border-[#2a2e39] text-xs font-semibold text-gray-400">ORDER BOOK</div>
                <div class="flex text-[10px] text-gray-500 px-2 py-1">
                    <span class="w-1/3">Price</span>
                    <span class="w-1/3 text-right">Amount</span>
                    <span class="w-1/3 text-right">Total</span>
                </div>
                <div id="orderbook-asks" class="flex flex-col-reverse overflow-hidden h-1/2 text-xs font-mono">
                    <!-- Asks go here -->
                </div>
                <div id="current-price-middle" class="py-1 border-y border-[#2a2e39] text-center font-bold text-lg text-up flex items-center justify-center gap-2">
                    42,150.00 <span class="text-xs">â†‘</span>
                </div>
                <div id="orderbook-bids" class="flex flex-col overflow-hidden h-1/2 text-xs font-mono">
                    <!-- Bids go here -->
                </div>
            </div>

            <!-- Recent Trades -->
            <div class="h-1/3 flex flex-col">
                <div class="p-2 border-b border-[#2a2e39] text-xs font-semibold text-gray-400">RECENT TRADES</div>
                <div class="flex-1 overflow-y-auto" id="recent-trades">
                    <!-- Trades go here -->
                </div>
            </div>
        </aside>
    </div>

    <script>
        // --- Configuration & State ---
        const ASSETS = {
            'BTC/USD': { price: 42150.00, vol: 50, type: 'crypto', decimals: 2 },
            'ETH/USD': { price: 2250.00, vol: 80, type: 'crypto', decimals: 2 },
            'EUR/USD': { price: 1.0850, vol: 20, type: 'forex', decimals: 5 },
            'SPY':     { price: 475.20, vol: 35, type: 'stock', decimals: 2 },
            'TSLA':    { price: 248.50, vol: 90, type: 'stock', decimals: 2 },
            'XAU/USD': { price: 2045.10, vol: 40, type: 'commodity', decimals: 2 }
        };

        let currentSymbol = 'BTC/USD';
        let marketData = []; // Array of candles {time, open, high, low, close, vol}
        let orderBook = { asks: [], bids: [] };
        let lastPrice = ASSETS[currentSymbol].price;
        let isRunning = true;
        
        // --- Canvas Setup ---
        const canvas = document.getElementById('main-chart');
        const ctx = canvas.getContext('2d');
        const container = document.getElementById('chart-container');
        
        // Chart State
        let chartConfig = {
            candleWidth: 8,
            candleSpacing: 2,
            scaleY: 1,
            offsetY: 0,
            offsetX: 0,
            gridColor: '#2a2e39',
            bgColor: '#0b0e11',
            wickColor: '#848e9c',
            maxCandles: 200
        };

        // --- Initialization ---
        function init() {
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            // Generate initial history
            generateHistory();
            
            // Build UI
            renderWatchlist();
            
            // Start loops
            requestAnimationFrame(animate);
            setInterval(updateMarket, 1000); // New candle updates
            setInterval(updateOrderBook, 200); // Fast order book updates
            setInterval(simulateTrade, 1500); // Random market trades
            
            // Interaction
            setupInteractions();
        }

        function resizeCanvas() {
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
            drawChart();
        }

        // --- Market Simulation Core ---

        function generateHistory() {
            marketData = [];
            let price = ASSETS[currentSymbol].price;
            let time = Date.now() - (chartConfig.maxCandles * 60000); // 1 min candles
            
            for(let i=0; i<100; i++) {
                const volatility = ASSETS[currentSymbol].vol / 10000;
                const change = price * (Math.random() - 0.5) * volatility;
                
                const open = price;
                const close = price + change;
                const high = Math.max(open, close) + Math.abs(change * Math.random());
                const low = Math.min(open, close) - Math.abs(change * Math.random());
                
                marketData.push({
                    time: time + (i * 60000),
                    open, high, low, close,
                    volume: Math.random() * 100
                });
                
                price = close;
                lastPrice = close;
            }
        }

        function updateMarket() {
            if(!isRunning) return;

            const volatility = ASSETS[currentSymbol].vol / 5000; // Simulating live movement
            let currentCandle = marketData[marketData.length - 1];
            
            // 20% chance to start a new candle, else update current
            if (Math.random() > 0.8) {
                const newOpen = currentCandle.close;
                currentCandle = {
                    time: Date.now(),
                    open: newOpen,
                    high: newOpen,
                    low: newOpen,
                    close: newOpen,
                    volume: 0
                };
                marketData.push(currentCandle);
                if(marketData.length > chartConfig.maxCandles) marketData.shift();
            }

            // Random walk logic
            const move = lastPrice * (Math.random() - 0.5) * volatility;
            let newPrice = lastPrice + move;
            
            // Update candle stats
            currentCandle.close = newPrice;
            currentCandle.high = Math.max(currentCandle.high, newPrice);
            currentCandle.low = Math.min(currentCandle.low, newPrice);
            currentCandle.volume += Math.random() * 10;
            
            lastPrice = newPrice;
            
            // DOM Updates
            updateHeaderUI();
        }

        function updateOrderBook() {
            // Simulate order book flutter
            const spread = lastPrice * 0.0005;
            orderBook.asks = [];
            orderBook.bids = [];
            
            for(let i=0; i<8; i++) {
                const askPrice = lastPrice + (spread * (i+1)) + (Math.random() * spread * 0.2);
                const bidPrice = lastPrice - (spread * (i+1)) - (Math.random() * spread * 0.2);
                orderBook.asks.push({ price: askPrice, size: Math.random() * 2 });
                orderBook.bids.push({ price: bidPrice, size: Math.random() * 2 });
            }
            // Reverse asks so lowest is at bottom (closest to spread)
            orderBook.asks.reverse(); 
            
            renderOrderBook();
        }

        function simulateTrade() {
            const side = Math.random() > 0.5 ? 'buy' : 'sell';
            const price = lastPrice + (Math.random() - 0.5) * (lastPrice * 0.0002);
            const size = (Math.random() * 2).toFixed(4);
            addRecentTrade(price, size, side);
        }

        // --- Chart Rendering Engine (The "Cool" Part) ---

        function drawChart() {
            // Clear canvas
            ctx.fillStyle = chartConfig.bgColor;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            if(marketData.length === 0) return;

            // Calculate Scale
            let minPrice = Infinity;
            let maxPrice = -Infinity;
            const visibleCandles = marketData.slice(-100); // Show last 100 for better view

            visibleCandles.forEach(c => {
                if(c.low < minPrice) minPrice = c.low;
                if(c.high > maxPrice) maxPrice = c.high;
            });

            // Add padding to range
            const range = maxPrice - minPrice;
            minPrice -= range * 0.1;
            maxPrice += range * 0.1;
            
            const pixelPerPrice = canvas.height / (maxPrice - minPrice);
            const candleWidth = (canvas.width - 60) / visibleCandles.length; // -60 for Y-axis

            // Draw Grid
            ctx.strokeStyle = chartConfig.gridColor;
            ctx.lineWidth = 1;
            ctx.beginPath();
            // Horizontal lines
            for(let i=0; i<5; i++) {
                const y = (canvas.height/5) * i;
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
            }
            ctx.stroke();

            // Draw Candles
            visibleCandles.forEach((candle, i) => {
                const x = i * candleWidth;
                const openY = canvas.height - (candle.open - minPrice) * pixelPerPrice;
                const closeY = canvas.height - (candle.close - minPrice) * pixelPerPrice;
                const highY = canvas.height - (candle.high - minPrice) * pixelPerPrice;
                const lowY = canvas.height - (candle.low - minPrice) * pixelPerPrice;

                const isUp = candle.close >= candle.open;
                const color = isUp ? '#00c853' : '#ff3d00';

                ctx.fillStyle = color;
                ctx.strokeStyle = isUp ? '#00c853' : '#ff3d00'; // Wicks same color as body looks cleaner

                // Wick
                ctx.beginPath();
                ctx.moveTo(x + candleWidth/2, highY);
                ctx.lineTo(x + candleWidth/2, lowY);
                ctx.stroke();

                // Body
                const bodyHeight = Math.max(Math.abs(openY - closeY), 1);
                ctx.fillRect(x + 2, Math.min(openY, closeY), candleWidth - 4, bodyHeight);
                
                // Volume bars at bottom (subtle)
                const volHeight = (candle.volume / 100) * (canvas.height * 0.2);
                ctx.fillStyle = isUp ? 'rgba(0, 200, 83, 0.2)' : 'rgba(255, 61, 0, 0.2)';
                ctx.fillRect(x + 2, canvas.height - volHeight, candleWidth - 4, volHeight);
            });

            // Draw Current Price Line
            const currentY = canvas.height - (lastPrice - minPrice) * pixelPerPrice;
            ctx.strokeStyle = '#2962ff';
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(0, currentY);
            ctx.lineTo(canvas.width, currentY);
            ctx.stroke();
            ctx.setLineDash([]);

            // Draw Price Label on Y-Axis
            ctx.fillStyle = '#2962ff';
            ctx.fillRect(canvas.width - 60, currentY - 10, 60, 20);
            ctx.fillStyle = '#fff';
            ctx.font = '10px JetBrains Mono';
            ctx.fillText(formatPrice(lastPrice), canvas.width - 55, currentY + 4);
        }

        function animate() {
            drawChart();
            requestAnimationFrame(animate);
        }

        // --- DOM Rendering Helpers ---

        function renderWatchlist() {
            const list = document.getElementById('watchlist');
            list.innerHTML = '';
            Object.keys(ASSETS).forEach(sym => {
                const el = document.createElement('div');
                el.className = `p-3 border-b border-[#2a2e39] cursor-pointer hover:bg-[#1e2329] transition-colors ${sym === currentSymbol ? 'bg-[#1e2329] border-l-2 border-l-blue-500' : ''}`;
                el.onclick = () => switchAsset(sym);
                
                // Mock change
                const change = (Math.random() * 2 - 1).toFixed(2);
                const colorClass = change >= 0 ? 'text-up' : 'text-down';
                
                el.innerHTML = `
                    <div class="flex justify-between items-center mb-1">
                        <span class="font-bold text-gray-200">${sym}</span>
                        <span class="${colorClass} text-xs font-mono">${change > 0 ? '+' : ''}${change}%</span>
                    </div>
                    <div class="flex justify-between items-center text-xs text-gray-500">
                        <span>Vol ${(Math.random()*10).toFixed(1)}M</span>
                        <span class="text-gray-300 font-mono">${ASSETS[sym].price}</span>
                    </div>
                `;
                list.appendChild(el);
            });
        }

        function renderOrderBook() {
            const asksContainer = document.getElementById('orderbook-asks');
            const bidsContainer = document.getElementById('orderbook-bids');
            
            asksContainer.innerHTML = orderBook.asks.map(o => `
                <div class="flex px-2 py-0.5 hover:bg-[#1e2329]">
                    <span class="w-1/3 text-down text-left">${formatPrice(o.price)}</span>
                    <span class="w-1/3 text-right text-gray-400">${o.size.toFixed(4)}</span>
                    <span class="w-1/3 text-right text-gray-500">${(o.price * o.size).toFixed(0)}</span>
                </div>
            `).join('');

            bidsContainer.innerHTML = orderBook.bids.map(o => `
                <div class="flex px-2 py-0.5 hover:bg-[#1e2329]">
                    <span class="w-1/3 text-up text-left">${formatPrice(o.price)}</span>
                    <span class="w-1/3 text-right text-gray-400">${o.size.toFixed(4)}</span>
                    <span class="w-1/3 text-right text-gray-500">${(o.price * o.size).toFixed(0)}</span>
                </div>
            `).join('');

            // Update Middle Price
            const midEl = document.getElementById('current-price-middle');
            midEl.innerHTML = `
                ${formatPrice(lastPrice)} 
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ${marketData[marketData.length-1].close > marketData[marketData.length-1].open ? 'text-up' : 'text-down'}" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="${marketData[marketData.length-1].close > marketData[marketData.length-1].open ? 'M5 10l7-7m0 0l7 7m-7-7v18' : 'M19 14l-7 7m0 0l-7-7m7 7V3'}" />
                </svg>
            `;
            midEl.className = `py-1 border-y border-[#2a2e39] text-center font-bold text-lg flex items-center justify-center gap-2 ${marketData[marketData.length-1].close > marketData[marketData.length-1].open ? 'text-up' : 'text-down'}`;
        }

        function addRecentTrade(price, size, side) {
            const container = document.getElementById('recent-trades');
            const el = document.createElement('div');
            el.className = 'flex text-[10px] font-mono px-2 py-1 border-b border-[#2a2e39] animate-fade-in';
            const time = new Date().toLocaleTimeString().split(' ')[0];
            
            el.innerHTML = `
                <span class="w-1/4 text-gray-500">${time}</span>
                <span class="w-1/4 ${side === 'buy' ? 'text-up' : 'text-down'}">${side.toUpperCase()}</span>
                <span class="w-1/4 text-right ${side === 'buy' ? 'text-up' : 'text-down'}">${formatPrice(price)}</span>
                <span class="w-1/4 text-right text-gray-300">${size}</span>
            `;
            
            container.prepend(el);
            if(container.children.length > 20) container.lastChild.remove();
        }

        function updateHeaderUI() {
            const priceEl = document.getElementById('current-price');
            const buyBtnPrice = document.getElementById('btn-buy-price');
            const sellBtnPrice = document.getElementById('btn-sell-price');
            
            const prevPrice = parseFloat(priceEl.innerText.replace(/,/g, ''));
            const newPriceStr = formatPrice(lastPrice);
            
            priceEl.innerText = newPriceStr;
            buyBtnPrice.innerText = newPriceStr;
            sellBtnPrice.innerText = newPriceStr;
            
            if(lastPrice > prevPrice) {
                priceEl.className = 'text-lg font-mono font-medium text-up price-flash-up';
            } else if (lastPrice < prevPrice) {
                priceEl.className = 'text-lg font-mono font-medium text-down price-flash-down';
            }

            // Remove flash class after anim
            setTimeout(() => {
                priceEl.classList.remove('price-flash-up', 'price-flash-down');
            }, 500);
        }

        // --- Utils & Interactions ---

        function switchAsset(symbol) {
            currentSymbol = symbol;
            lastPrice = ASSETS[symbol].price;
            generateHistory();
            renderWatchlist();
            
            document.getElementById('active-symbol').innerText = symbol;
        }

        function formatPrice(val) {
            return val.toLocaleString('en-US', { 
                minimumFractionDigits: ASSETS[currentSymbol].decimals, 
                maximumFractionDigits: ASSETS[currentSymbol].decimals 
            });
        }

        function setupInteractions() {
            document.getElementById('btn-buy').addEventListener('click', () => {
                addRecentTrade(lastPrice, (Math.random()*5).toFixed(4), 'buy');
                flashEquity('up');
            });
            document.getElementById('btn-sell').addEventListener('click', () => {
                addRecentTrade(lastPrice, (Math.random()*5).toFixed(4), 'sell');
                flashEquity('down');
            });

            // Canvas Mouse Interaction (Tooltip)
            canvas.addEventListener('mousemove', (e) => {
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                
                const visibleCandles = marketData.slice(-100);
                const candleWidth = (canvas.width - 60) / visibleCandles.length;
                const index = Math.floor(x / candleWidth);
                
                if(index >= 0 && index < visibleCandles.length) {
                    const c = visibleCandles[index];
                    const tt = document.getElementById('chart-tooltip');
                    tt.style.display = 'block';
                    tt.style.left = e.clientX + 10 + 'px';
                    tt.style.top = e.clientY + 10 + 'px';
                    
                    document.getElementById('tt-open').innerText = formatPrice(c.open);
                    document.getElementById('tt-high').innerText = formatPrice(c.high);
                    document.getElementById('tt-low').innerText = formatPrice(c.low);
                    document.getElementById('tt-close').innerText = formatPrice(c.close);
                }
            });

            canvas.addEventListener('mouseleave', () => {
                document.getElementById('chart-tooltip').style.display = 'none';
            });
        }

        function flashEquity(dir) {
            const eq = document.getElementById('equity-val');
            // Mock equity change
            let cur = parseFloat(eq.innerText.replace(/[$,]/g, ''));
            cur += dir === 'up' ? Math.random() * 100 : -(Math.random() * 100);
            eq.innerText = '$' + cur.toLocaleString('en-US', {minimumFractionDigits: 2});
            eq.style.color = dir === 'up' ? 'var(--up-color)' : 'var(--down-color)';
            setTimeout(() => eq.style.color = 'white', 300);
        }

        // Boot
        init();

    </script>
</body>
</html>
